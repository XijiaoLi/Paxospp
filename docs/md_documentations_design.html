<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paxospp: Design Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Paxospp
   &#160;<span id="projectnumber">1.2</span>
   </div>
   <div id="projectbrief">A C++ implementation of Lamport&#39;s Paxos algorithm</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Design Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1"></a>
Overview</h2>
<p>Paxospp aims to create a lightweight Paxos consensus protocol library that has a simple and easy-to-use interface. This libaray helps the programmers to develop multi-server applications without dealing with all the system, networks, and other reliability issues. It helps services in synchronizing the state from a single node to the other nodes to form a multi-copy cluster and handling fail-over automatically. A typical application using our libaray would be distributed data storage system.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
Agreement in a Paxospp</h3>
<ul>
<li>Majority agreement Paxospp Library requires only a majority of nodes to be alive and make sequntial progress. For nodes in the distributed environment, we recognize the complexities of the situation, it's both more time efficient and relible to just make a few nodes agree. In the real world, there could be server crashes or network unreliablities. If a minority of the nodes is disconnected from the other servers, the paxospp service continues to function and store the intended values. Later when the defective server reboots or the network recovers, the minority of nodes can catch up. Hence consistency is maintained.</li>
</ul>
<h3><a class="anchor" id="autotoc_md3"></a>
Communication between the servers</h3>
<ul>
<li>Network protocol Paxospp uses gRPC under the hood. gRPC is build on http2 and TCP protocol. In Paxospp, integrity is provided in different layers. During the network communication, Paxospp offers data integrity and delivery gurantee. Also, by applying features of the network protocol saves RTTs and enables Paxospp library to use less time overall in the logging process.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Design Choices</h2>
<h3><a class="anchor" id="autotoc_md5"></a>
Multithreading and Concurrency</h3>
<ul>
<li>Node representation A Paxospp node in Paxospp library is naturally divided and represented by two modules, a server component which keeps listening for the incoming synchronization requests and a client part which initiates data storage requests and passes to other nodes. Each server is on a thread listening for requests.</li>
<li>Concurrent Data Storage Multiple instnaces may be proposed from different nodes around the same time. Paxospp runs the protocol concurrently for all of these instances. Paxospp continues to make progress toward agreement for all of these instances. We choose to start a new thread for each instance hence offer a non-blocking service.</li>
</ul>
<h3><a class="anchor" id="autotoc_md6"></a>
Smart pointers</h3>
<ul>
<li>Unique pointers Unique pointers are heavily used in Paxospp library. Because <code>PaxosServiceImpl</code> destructor will recursively call its members' destructors, and it is reasonable to release its resources when the object is out of scope. Smartpointer enables us to achive the automatic resource release without overriding default destructor and reimplement the normal pointer release process.</li>
</ul>
<h3><a class="anchor" id="autotoc_md7"></a>
Locking</h3>
<ul>
<li>Shared_mutex Paxospp protects coherence among nodes by using locks before and after checking or changing the database in the node. So peers will not get chaotic views.</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Features</h2>
<h3><a class="anchor" id="autotoc_md9"></a>
Easy to use</h3>
<ul>
<li>Paxospp has a simple and clean interface to use. A Kvstore example is also available for users to dive deeper and learn how to use Paxospp.</li>
</ul>
<h3><a class="anchor" id="autotoc_md10"></a>
Fast and fault tolorance</h3>
<ul>
<li>Paxospp library makes progress even when a subset of the nodes is up. In consideration of the complex environment in the real world, Paxospp tolerates the server failures and network crashes while still maintains data consistency.</li>
</ul>
<h3><a class="anchor" id="autotoc_md11"></a>
Concurency</h3>
<ul>
<li>Paxsospp enables multiple instances to launch at the same time in a non-blocking fashine.</li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
Future works</h2>
<h3><a class="anchor" id="autotoc_md13"></a>
Enable Polymorphism Storage</h3>
<ul>
<li>Currently, we only allows <code>std::string</code> stored in the paxos database. We would like to change to <code>std::any</code> when it is available in the future when new C++ versions released.</li>
</ul>
<h3><a class="anchor" id="autotoc_md14"></a>
Space Saving</h3>
<ul>
<li>In the current version, Paxospp stores all the previous data. However, some data may not needed after a certain amount of time, and it will just be a waste of disk resources to continue storing them. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
